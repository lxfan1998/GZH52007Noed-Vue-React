
# 如何解决ajax的跨域问题？
+ jsonp（json with padding） 是一种前后端可以交互的方式
    + jsonp的原理是什么？
        + 利用script标签的src属性可以发送http请求，一般在请求的时候会携带一个callback回调函数
        + 需要实现在客户端定义该回调函数
        + 服务器端拿json数据填充这个callback后进行响应
        + 客户端执行该callback，实现前后端的通信

+ cors 才是真正的解决了跨域问题
    + 什么是跨域？
        + 不同域名之间的请求则称之为跨域请求    
        + 什么样的域名为不同的域名？
            + 协议
            + 域名
            + 端口
            
    + 为什么要进行跨域请求？
        + 目前的互联网项目一般都会多个项目之间进行数据的交互，出现了跨域请求
        
    + 为什么在使用ajax做请求的时候，出现了跨域请求
        + 浏览器的同源策略导致无法请求成功
        
    + 什么是同源策略？
        + 相同服务器之间的请求没有受到浏览器的限制，则为同源策略
        
    + 为什么会出现同源策略？
        + 主要是为了数据的安全，这个和早期的互联网有关系。早期的互联网结构比较单一，一般做一个网站后，为了防止别人偷取自己网站里面的数据，早期在设计浏览器的时候，就限制了不同域名之间的请求。
            + A公司：图片网站
            + B公司：1. 自己上传的图片 2. 偷取A公司的图片资源
            
    + 为什么现在的互联网架构要允许跨域请求？
    + 互联网项目的架构很多元化（多终端），对于这种多终端的架构，一般来说只需要一个数据的提供方，其他都是数据的消费方。所以现在的开发模式一般都是基于api接口调用进行开发，后端只需要编写接口，返回数据，而数据的处理是交给前端进行完成的，那么这个时候，这些前端很有可能是部署在多个服务器，或者是完全不同的架构系统里面。
        + b/s（pc）
        + b/s（h5）
        + c/s（app）
        + 微信公众号
        + 小程序
            + 微信小程序
            + 抖音小程序
            + 百度小程序
        + 多项目合作
      
    + cors是如何解决跨域请求的？
        + 设置我们的http响应头的`Access-Control-Allow-Origin`，这个是值为允许跨域的域名，'*'，'具体的域名'。
        
        + 在使用跨域请求的时候，请求是否发送了？（发送了）
        + 浏览器是否响应了？（响应了）
        + 为什么ajax的responseText无法获取到服务器相应信息呢？
            + 在服务器发出相应信息后，浏览器引擎会判断响应数据的服务器的域名地址是否和发送ajax的域名地址一致，如果一致，就会把响应数据给ajax引擎，如果不一致，则立马丢弃。丢弃之前，得看一下服务器响应头里面的`Access-Control-Allow-Origin`，看一下当前的ajax的发送域名是否在该字段里面出现了，如果出现，则不会丢弃，否则丢弃。

+ 同域代理
    + 什么是同域代理？
        + 通过自己的后端服务器向需要跨域才能请求的服务器进行数据的请求。
        + 后端服务器是没有同源策略的概念的，服务器的请求是不会受到限制的。
        + ajax先请求的是自己的域名服务器，则不会出现跨域。
    
    + 反向代理
        + 前端现在在做开发的时候，有时出现了跨域请求，则有的时候，别人会说，去配置一下反向代理。
        + 互联网上，浏览器/客户端有很多种，但是服务器一般来说只有一个服务器，早先结构比较简单的情况下，浏览器直接向服务器发送请求，服务器给响应，但是随着业务越来越复杂，网站用户越来越多，单台服务器能力有限，就提供不了服务了。这个时候常用的解决方案有两种：
            1. 向上扩展，把单台服务器的配置升高
            2. 向外扩展，增加服务器。假如有10台服务器，这10台服务器都要联网，因为联网之后才能提供服务，这样就需要给每台服务器配置一条网线，成本增加，为了解决这样的问题，我们只配置一条网线，对外只放一台服务器，这一台服务器具有公网IP地址，这意味着所有的请求都基于这个地址来发送请求，这台服务器对内（其他服务器）就要做信息的转发。对外的这台服务器我们称之为负载均衡服务器（常见的比如Nginx软件、big5硬件就可以做得到），转发的策略常见的有三种：1.轮询 2. 加权 3. ip hash（拿IP地址对服务器的台数做取模（%）运算，这个余数的范围就在0~（服务器台数-1）之间）。这种架构我们一般叫做反向代理。
         + 反向代理服务器的作用：1. 负载均衡 2. 信息安全（只向外暴露一台服务器，外部是不知道内部有多少台服务器的）
    
    + 正向代理
    

---

在做前端的时候，一般都会进行代理服务器的配置。